// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Raca {
  id           Int          @id @default(autoincrement())
  nome         String       @unique
  descricao    String?
  mundoNatal   String?
  habilidades  String?      // JSON string for special abilities
  personagens  Personagem[]

  criadoEm     DateTime     @default(now())
  atualizadoEm DateTime     @updatedAt

  @@map("racas")
}

model Planeta {
  id           Int          @id @default(autoincrement())
  nome         String       @unique
  descricao    String?
  galaxia      String?
  populacao    String?
  clima        String?
  personagens  Personagem[]

  criadoEm     DateTime     @default(now())
  atualizadoEm DateTime     @updatedAt

  @@map("planetas")
}

model Personagem {
  id                 Int      @id @default(autoincrement())
  nome               String
  ki                 Int?
  racaId             Int
  planetaId          Int
  tecnicasEspeciais  String?  // JSON string for array of techniques
  aparicoesSagas     String?  // JSON string for array of sagas
  transformacoes     String?  // JSON string for array of transformations
  biografia          String?
  imagemUrl          String?
  raca               Raca     @relation(fields: [racaId], references: [id])
  planeta            Planeta  @relation(fields: [planetaId], references: [id])

  criadoEm           DateTime @default(now())
  atualizadoEm       DateTime @updatedAt

  @@map("personagens")
}